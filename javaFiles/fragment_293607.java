if (!dir.exists()) {
   dir.mkdir();
   dir.deleteOnExit();
}

// etc...