String xml = null;
try {
  xml = ...; //Create a well formed xml request

  //open a http connection and post it
} catch (Exception e) {
    if (xml != null) {
        // write XML to file
    }
}