Runtime.getRuntime().addShutdownHook(new Thread() {

    @Override
    public void run() {...} //your code to run when closing the program

}