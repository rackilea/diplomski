public class Test extends JPanel {
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        // code here
    }

    public void doStuff() { repaint(); }
}