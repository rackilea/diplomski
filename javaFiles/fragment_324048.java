...
    testX++;
 }
 if (ship.rotated)
     currentX++;
 else {
     currentY++;
 }
 ...