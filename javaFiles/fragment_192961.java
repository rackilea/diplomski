synchronized(lock) {
    if(supportsSomeStuff()){
         .....
    }
    else{
         .....
    }
}