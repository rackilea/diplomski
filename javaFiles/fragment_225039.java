long start = System.currentTimeMillis();
    long end = start + 300000;
    while(true) {
        //do your code
        //
        if(System.currentTimeMillis() > end) {
            break;
        }
    }