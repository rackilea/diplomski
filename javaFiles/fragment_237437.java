while (on) {
  //...
  datagramSocket.setSoTimeout(5000);
  datagramSocket.receive(packet);
  //...
}