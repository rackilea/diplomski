// no need to declare flag before the loop

for(;;) {
    // initialise flag to true for each input number
    boolean flag = true;
    System.out.print("\nPlease enter a number : ");
    n = in.nextInt();
    ...