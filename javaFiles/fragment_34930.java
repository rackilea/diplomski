DataOutput out = ...
String fileName = ...
byte[] bytes = ...
int hash = ...

out.writeUTF(fileName);
out.writeInt(bytes.length);
out.write(bytes);
out.writeInt(hash);
out.flush();