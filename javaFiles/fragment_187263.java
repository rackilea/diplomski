public Location getLocation(){
    //...code
      if (ActivityCompat.checkSelfPermissio... ) {

    // ERROR : cannot have function declaration inside another function
          public void onRequestPermissionsResult(...) {
                switch (requestCode) {//..code}
          }
}