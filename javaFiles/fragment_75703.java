long start=System.currentTimeMillis(); // Not very very accurate

while (System.currentTimeMillis()-start<30000)
{
wave();
// count something
}