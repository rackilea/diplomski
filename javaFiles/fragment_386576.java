if ( (sum - lastsum) < 0.001 )
{
    break;
}
    lastsum = sum;
}